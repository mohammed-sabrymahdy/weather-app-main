<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Now | Current Weather & Forecast</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;500;600;700&family=Bricolage+Grotesque:wght@700&display=swap");

      :root {
        --c-neutral-900: hsl(243, 96%, 9%);
        --c-neutral-800: rgba(39, 31, 66, 0.7);
        --c-neutral-700: rgba(45, 36, 73, 0.8);
        --c-neutral-600: hsl(243, 23%, 30%);
        --c-neutral-300: hsl(240, 6%, 70%);
        --c-neutral-200: hsl(250, 6%, 84%);
        --c-neutral-0: hsl(0, 0%, 100%);
        --c-blue-500: hsl(233, 67%, 56%);
        --c-blue-700: hsl(248, 70%, 36%);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "DM Sans", Arial, sans-serif;
        overflow-x: hidden;
        background: #040307;
        background-image: radial-gradient(
            circle at 50% 35%,
            #1d1431 0%,
            transparent 65%
          ),
          linear-gradient(180deg, #000000 0%, #070012 100%);
        color: var(--c-neutral-0);
        line-height: 1.5;
        padding-bottom: 50px;
        position: relative;
        min-height: 100vh;
      }

      /* Animated Stars Background */
      .stars-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
      }

      .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        animation: twinkle linear infinite;
      }

      @keyframes twinkle {
        0%,
        100% {
          opacity: 0.3;
          transform: scale(1);
        }
        50% {
          opacity: 1;
          transform: scale(1.2);
        }
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      /* Vignette Effect */
      .vignette {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 1;
        background: radial-gradient(
          circle at center,
          rgba(0, 0, 0, 0) 50%,
          rgba(0, 0, 0, 0.4) 100%
        );
      }

      /* Content Layer */
      .content-layer {
        position: relative;
        z-index: 2;
      }

      .wrapper {
        max-width: 1216px;
        margin: 0 auto;
        padding: 0 16px;
      }

      .visually-hidden {
        position: absolute;
        left: -10000px;
        width: 1px;
        height: 1px;
        overflow: hidden;
      }

      /* Header */
      .header {
        padding: 20px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .header__logo {
        font-family: "Bricolage Grotesque", sans-serif;
        font-size: 24px;
        font-weight: 700;
        color: var(--c-neutral-0);
        text-decoration: none;
        text-shadow: 0 2px 10px rgba(138, 100, 255, 0.5);
        transition: all 0.3s ease;
      }

      .header__logo:hover {
        text-shadow: 0 2px 20px rgba(138, 100, 255, 0.8);
      }

      .dropdown {
        background: rgba(255, 255, 255, 0.05);
        color: var(--c-neutral-0);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
      }

      .dropdown:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.3);
      }
      .dropdown option {
        background: var(--c-neutral-900);
        color: var(--c-neutral-0);
      }

      /* Hero Section */
      .hero {
        text-align: center;
        padding: 48px 0;
      }

      .hero__title {
        font-family: "Bricolage Grotesque", sans-serif;
        font-size: clamp(32px, 5vw, 52px);
        margin-bottom: 32px;
        line-height: 1.2;
        text-shadow: 0 4px 20px rgba(138, 100, 255, 0.4);
      }

      .hero__search {
        display: flex;
        gap: 12px;
        max-width: 656px;
        margin: 0 auto;
        flex-wrap: wrap;
      }

      .hero__textbox {
        flex: 1;
        min-width: 250px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 16px 20px;
        border-radius: 12px;
        color: var(--c-neutral-0);
        font-size: 18px;
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
      }

      .hero__textbox::placeholder {
        color: var(--c-neutral-300);
      }

      .hero__textbox:focus {
        outline: none;
        background: rgba(255, 255, 255, 0.08);
        border-color: var(--c-blue-500);
        box-shadow: 0 0 20px rgba(122, 100, 255, 0.3);
      }

      .hero__button {
        background: linear-gradient(
          135deg,
          var(--c-blue-500),
          var(--c-blue-700)
        );
        color: white;
        padding: 16px 32px;
        border: none;
        border-radius: 12px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(122, 100, 255, 0.4);
      }

      .hero__button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 25px rgba(122, 100, 255, 0.6);
      }

      .hero__button:active {
        transform: translateY(0);
      }

      /* Dashboard */
      .dashboard {
        display: grid;
        gap: 32px;
        margin-top: 32px;
      }

      @media (min-width: 1000px) {
        .dashboard {
          grid-template-columns: 2fr 1fr;
          gap: 32px;
        }
      }

      /* Current Weather */
      .current__weather {
        background: linear-gradient(
          135deg,
          rgba(122, 70, 255, 0.3),
          rgba(100, 140, 255, 0.2)
        );
        border: 1px solid rgba(122, 70, 255, 0.3);
        border-radius: 20px;
        padding: 40px;
        margin-bottom: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 24px;
        backdrop-filter: blur(20px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
      }

      .current__weather::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.1) 0%,
          transparent 70%
        );
        animation: float 10s ease-in-out infinite;
      }

      .current__city {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 8px;
        position: relative;
        z-index: 1;
      }

      .current__date {
        font-size: 18px;
        color: var(--c-neutral-200);
        position: relative;
        z-index: 1;
      }

      .current__info {
        display: flex;
        align-items: center;
        gap: 20px;
        position: relative;
        z-index: 1;
      }

      .current__icon {
        width: 120px;
        height: 120px;
        font-size: 80px;
        filter: drop-shadow(0 4px 15px rgba(255, 255, 255, 0.3));
      }

      .current__temp {
        font-size: 96px;
        font-weight: 600;
        font-style: italic;
        line-height: 1;
        text-shadow: 0 4px 20px rgba(255, 255, 255, 0.3);
      }

      /* Conditions */
      .current__conditions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 16px;
      }

      .block {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 12px;
        padding: 20px;
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
      }

      .block:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.25);
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(122, 70, 255, 0.2);
      }

      .current__condition-title {
        font-size: 18px;
        color: var(--c-neutral-200);
        margin-bottom: 12px;
      }

      .current__condition-value {
        font-size: 32px;
        font-weight: 300;
      }

      /* Daily Forecast */
      .section__title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 20px;
      }

      .daily__forecast {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        gap: 16px;
      }

      .daily__day {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 12px;
        padding: 16px;
        text-align: center;
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
      }

      .daily__day:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.25);
        transform: translateY(-4px);
        box-shadow: 0 8px 20px rgba(122, 70, 255, 0.2);
      }

      .daily__day-title {
        font-size: 18px;
        margin-bottom: 12px;
      }

      .daily__day-icon {
        width: 60px;
        height: 60px;
        margin: 12px auto;
        font-size: 40px;
        filter: drop-shadow(0 2px 8px rgba(255, 255, 255, 0.2));
      }

      .daily__day-temps {
        display: flex;
        justify-content: space-around;
        margin-top: 12px;
        font-size: 16px;
      }

      .daily__day-low {
        color: var(--c-neutral-300);
      }

      /* Hourly Forecast */
      .hourly {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 20px;
        padding: 20px;
        max-height: 600px;
        overflow-y: auto;
        backdrop-filter: blur(15px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }

      .hourly::-webkit-scrollbar {
        width: 8px;
      }

      .hourly::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
      }

      .hourly::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 10px;
      }

      .hourly::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      .hourly__header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .hourly__hours {
        display: grid;
        gap: 12px;
      }

      .hourly__hour {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        padding: 12px 16px;
        display: grid;
        grid-template-columns: 60px 1fr auto;
        align-items: center;
        gap: 16px;
        transition: all 0.3s ease;
      }

      .hourly__hour:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateX(4px);
      }

      .hourly__hour-icon {
        width: 40px;
        height: 40px;
        font-size: 32px;
        filter: drop-shadow(0 2px 6px rgba(255, 255, 255, 0.2));
      }

      .hourly__hour-time {
        font-size: 18px;
      }

      .hourly__hour-temp {
        font-size: 20px;
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <div class="stars-container" id="starsContainer"></div>
    <div class="vignette"></div>

    <div class="content-layer">
      <a href="#main" class="visually-hidden">Skip to main content</a>

      <header class="header wrapper">
        <a class="header__logo" href="/">‚õÖ Weather Now</a>
        <select class="dropdown" id="ddlUnits">
          <option value="C">¬∞C</option>
          <option value="F">¬∞F</option>
        </select>
      </header>

      <main id="main" class="main wrapper">
        <section class="hero">
          <h1 class="hero__title">How's the sky looking today?</h1>
          <div class="hero__search">
            <input
              class="hero__textbox"
              type="text"
              id="txtSearch"
              placeholder="Search for a place..."
              value="London"
            />
            <button id="btnSearch" class="hero__button">Search</button>
          </div>
        </section>

        <div id="dashboard" class="dashboard">
          <div>
            <section class="current">
              <h2 class="visually-hidden">Current Weather</h2>
              <div class="current__weather">
                <div class="current__location">
                  <div id="dvCityCountry" class="current__city">Loading...</div>
                  <div id="dvCurrDate" class="current__date"></div>
                </div>
                <div class="current__info">
                  <div id="currentIcon" class="current__icon">‚òÄÔ∏è</div>
                  <div class="current__temp">
                    <span id="dvCurrTemp">--</span>¬∞
                  </div>
                </div>
              </div>

              <div class="current__conditions">
                <div class="block">
                  <p class="current__condition-title">Feels Like</p>
                  <p class="current__condition-value">
                    <span id="pFeelsLike">--</span>¬∞
                  </p>
                </div>
                <div class="block">
                  <p class="current__condition-title">Humidity</p>
                  <p class="current__condition-value">
                    <span id="pHumidity">--</span>%
                  </p>
                </div>
                <div class="block">
                  <p class="current__condition-title">Wind</p>
                  <p id="pWind" class="current__condition-value">--</p>
                </div>
                <div class="block">
                  <p class="current__condition-title">Precipitation</p>
                  <p id="pPrecipitation" class="current__condition-value">--</p>
                </div>
              </div>
            </section>

            <section class="daily">
              <h2 class="section__title">7-Day Forecast</h2>
              <div id="dailyForecast" class="daily__forecast"></div>
            </section>
          </div>

          <section class="hourly">
            <div class="hourly__header">
              <h2 class="section__title" style="margin: 0">Hourly Forecast</h2>
              <select class="dropdown" id="ddlDay"></select>
            </div>
            <div id="hourlyForecast" class="hourly__hours"></div>
          </section>
        </div>
      </main>
    </div>

    <script>
      // Create animated stars background
      function createStars() {
        const container = document.getElementById("starsContainer");
        const starCount = 200;

        for (let i = 0; i < starCount; i++) {
          const star = document.createElement("div");
          star.className = "star";

          const size = Math.random() * 3 + 1;
          const x = Math.random() * 100;
          const y = Math.random() * 100;
          const duration = Math.random() * 3 + 2;
          const delay = Math.random() * 5;

          star.style.width = size + "px";
          star.style.height = size + "px";
          star.style.left = x + "%";
          star.style.top = y + "%";
          star.style.animationDuration = duration + "s";
          star.style.animationDelay = delay + "s";

          // Add color variation
          const colors = ["#ffffff", "#e0d0ff", "#ffd0e0", "#d0e0ff"];
          star.style.background =
            colors[Math.floor(Math.random() * colors.length)];
          star.style.boxShadow = `0 0 ${size * 2}px ${
            colors[Math.floor(Math.random() * colors.length)]
          }`;

          container.appendChild(star);
        }
      }

      createStars();

      // Weather App Logic
      const API_KEY = "fc04fdafd0e844b0b6a185524252710";

      const elements = {
        ddlUnits: document.getElementById("ddlUnits"),
        ddlDay: document.getElementById("ddlDay"),
        txtSearch: document.getElementById("txtSearch"),
        btnSearch: document.getElementById("btnSearch"),
        dvCityCountry: document.getElementById("dvCityCountry"),
        dvCurrDate: document.getElementById("dvCurrDate"),
        dvCurrTemp: document.getElementById("dvCurrTemp"),
        currentIcon: document.getElementById("currentIcon"),
        pFeelsLike: document.getElementById("pFeelsLike"),
        pHumidity: document.getElementById("pHumidity"),
        pWind: document.getElementById("pWind"),
        pPrecipitation: document.getElementById("pPrecipitation"),
        dailyForecast: document.getElementById("dailyForecast"),
        hourlyForecast: document.getElementById("hourlyForecast"),
      };

      let weatherData = null;

      const weatherIcons = {
        0: "‚òÄÔ∏è",
        1: "üå§Ô∏è",
        2: "‚õÖ",
        3: "‚òÅÔ∏è",
        45: "üå´Ô∏è",
        48: "üå´Ô∏è",
        51: "üå¶Ô∏è",
        53: "üå¶Ô∏è",
        55: "üåßÔ∏è",
        56: "üåßÔ∏è",
        57: "üåßÔ∏è",
        61: "üåßÔ∏è",
        63: "üåßÔ∏è",
        65: "‚õàÔ∏è",
        66: "üåßÔ∏è",
        67: "üåßÔ∏è",
        71: "üå®Ô∏è",
        73: "üå®Ô∏è",
        75: "‚ùÑÔ∏è",
        77: "üå®Ô∏è",
        80: "üåßÔ∏è",
        81: "‚õàÔ∏è",
        82: "‚õàÔ∏è",
        85: "üå®Ô∏è",
        86: "üå®Ô∏è",
        95: "‚õàÔ∏è",
        96: "‚õàÔ∏è",
        99: "‚õàÔ∏è",
      };

      function getWeatherIcon(code) {
        return weatherIcons[code] || "üå°Ô∏è";
      }

      function formatDate(date) {
        return new Intl.DateTimeFormat("en-US", {
          weekday: "long",
          year: "numeric",
          month: "short",
          day: "numeric",
        }).format(date);
      }

      function formatDay(date) {
        return new Intl.DateTimeFormat("en-US", { weekday: "short" }).format(
          date
        );
      }

      function formatHour(date) {
        return new Intl.DateTimeFormat("en-US", {
          hour: "numeric",
          hour12: true,
        }).format(date);
      }

      async function searchLocation() {
        const search = elements.txtSearch.value.trim();
        if (!search) return;

        try {
          elements.dvCityCountry.textContent = "Searching...";

          const geoUrl = `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(
            search
          )}&format=jsonv2&addressdetails=1`;
          const geoResponse = await fetch(geoUrl);
          const geoData = await geoResponse.json();

          if (!geoData || geoData.length === 0) {
            throw new Error("Location not found");
          }

          const location = geoData[0];
          const lat = location.lat;
          const lon = location.lon;

          const cityName =
            location.address.city ||
            location.address.town ||
            location.address.village ||
            location.name;
          const countryCode =
            location.address.country_code?.toUpperCase() || "";

          elements.dvCityCountry.textContent = `${cityName}, ${countryCode}`;
          elements.dvCurrDate.textContent = formatDate(new Date());

          await fetchWeather(lat, lon);
        } catch (error) {
          console.error("Error:", error);
          elements.dvCityCountry.textContent = "Error loading location";
          alert("Could not find that location. Please try another search.");
        }
      }

      async function fetchWeather(lat, lon) {
        try {
          const isFahrenheit = elements.ddlUnits.value === "F";
          const tempUnit = isFahrenheit ? "fahrenheit" : "celsius";
          const windUnit = isFahrenheit ? "mph" : "kmh";
          const precipUnit = isFahrenheit ? "inch" : "mm";

          const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,precipitation,wind_speed_10m&hourly=temperature_2m,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min&temperature_unit=${tempUnit}&wind_speed_unit=${windUnit}&precipitation_unit=${precipUnit}&timezone=auto`;

          const response = await fetch(url);
          weatherData = await response.json();

          updateCurrentWeather();
          updateDailyForecast();
          populateDayDropdown();
          updateHourlyForecast();
        } catch (error) {
          console.error("Error fetching weather:", error);
          alert("Error loading weather data");
        }
      }

      function updateCurrentWeather() {
        const current = weatherData.current;

        elements.dvCurrTemp.textContent = Math.round(current.temperature_2m);
        elements.currentIcon.textContent = getWeatherIcon(current.weather_code);
        elements.pFeelsLike.textContent = Math.round(
          current.apparent_temperature
        );
        elements.pHumidity.textContent = current.relative_humidity_2m;
        elements.pWind.textContent = `${current.wind_speed_10m} ${weatherData.current_units.wind_speed_10m}`;
        elements.pPrecipitation.textContent = `${current.precipitation} ${weatherData.current_units.precipitation}`;
      }

      function updateDailyForecast() {
        const daily = weatherData.daily;
        elements.dailyForecast.innerHTML = "";

        for (let i = 0; i < 7; i++) {
          const date = new Date(daily.time[i]);
          const day = i === 0 ? "Today" : formatDay(date);
          const icon = getWeatherIcon(daily.weather_code[i]);
          const high = Math.round(daily.temperature_2m_max[i]);
          const low = Math.round(daily.temperature_2m_min[i]);

          const dayElement = document.createElement("div");
          dayElement.className = "daily__day block";
          dayElement.innerHTML = `
          <p class="daily__day-title">${day}</p>
          <div class="daily__day-icon">${icon}</div>
          <div class="daily__day-temps">
            <span class="daily__day-high">${high}¬∞</span>
            <span class="daily__day-low">${low}¬∞</span>
          </div>
        `;
          elements.dailyForecast.appendChild(dayElement);
        }
      }

      function populateDayDropdown() {
        elements.ddlDay.innerHTML = "";

        for (let i = 0; i < 7; i++) {
          const date = new Date(weatherData.daily.time[i]);
          const dayName =
            i === 0
              ? "Today"
              : new Intl.DateTimeFormat("en-US", { weekday: "long" }).format(
                  date
                );

          const option = document.createElement("option");
          option.value = i;
          option.textContent = dayName;
          elements.ddlDay.appendChild(option);
        }
      }

      function updateHourlyForecast() {
        const dayIndex = parseInt(elements.ddlDay.value) || 0;
        const startHour = dayIndex * 24;
        const endHour = startHour + 24;

        elements.hourlyForecast.innerHTML = "";

        for (let h = startHour; h < endHour; h++) {
          if (h >= weatherData.hourly.time.length) break;

          const date = new Date(weatherData.hourly.time[h]);
          const hour = formatHour(date);
          const temp = Math.round(weatherData.hourly.temperature_2m[h]);
          const icon = getWeatherIcon(weatherData.hourly.weather_code[h]);

          const hourElement = document.createElement("div");
          hourElement.className = "hourly__hour";
          hourElement.innerHTML = `
          <div class="hourly__hour-icon">${icon}</div>
          <p class="hourly__hour-time">${hour}</p>
          <p class="hourly__hour-temp">${temp}¬∞</p>
        `;
          elements.hourlyForecast.appendChild(hourElement);
        }
      }

      // Event Listeners
      elements.btnSearch.addEventListener("click", searchLocation);
      elements.txtSearch.addEventListener("keypress", (e) => {
        if (e.key === "Enter") searchLocation();
      });
      elements.ddlUnits.addEventListener("change", () => {
        if (weatherData) {
          const cityCountry = elements.dvCityCountry.textContent;
          if (cityCountry && cityCountry !== "Loading...") {
            searchLocation();
          }
        }
      });
      elements.ddlDay.addEventListener("change", updateHourlyForecast);

      // Initial load
      searchLocation();
    </script>
  </body>
</html>
